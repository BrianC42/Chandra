{
"comment - network purpose 1" : "work network for development of new networks",
"comment - network purpose 2" : "initial development done here then copied to named files for refinement",
"comment - description 1" : "A model to identify situation where a stock price increases 10% within 10 trading days",
"comment - description 2" : "Approach - use the Bollinger Band technical analysis",
"comment - dataflow section" : "Specification details for the flows of data between processing nodes -----------------------------",
"dataFlows" : [
	{
	"flowName" : "acquiredData",
	"requiredFields" : {"flowFrom" : "acquireData", "flowTo" : "loadData"},
	"conditionalFields" : {
		"flowDataDir" : "internal_flows\\BBForecast"
		}
	},
	{
	"flowName" : "LoadedData",
	"requiredFields" : {"flowFrom" : "loadData", "flowTo" : "PrepData"},
	"conditionalFields" : {
		"flowDataFile" : "internal_flows\\BBForecast\\BBLoadedData.csv",
		"TensorflowData" : {
			"features" : ["BB_Upper", "BB_Lower", "EMA20", "Open", "High", "Low", "Close"],
			"targets" : ["10day10pct"],
			"timeSequence" : true, "seriesStepIDField" : ["DateTime"], "seriesDataType" : "TDADateTime", "type" : "relative_time_series"
			}
		}
	},
	{
	"flowName" : "PreparedData",
	"requiredFields" : {"flowFrom" : "PrepData", "flowTo" : "BollingerBands"},
	"conditionalFields" : {
		"flowDataFile" : "internal_flows\\BBPrepared.csv",
		"TensorflowData" : {
			"features" : ["BB_Upper", "BB_Lower", "EMA20", "Open", "High", "Low", "Close"],
			"targets" : ["x0_False", "x0_True"],
			"timeSequence" : true, "seriesStepIDField" : ["DateTime"], "seriesDataType" : "TDADateTime", "type" : "relative_time_series"
			}
		}
	}
],
"comment - dataflow" : "dataflow definition end ----------------------------------------------------------------------------------",
"comment - processing node section" : "Specification details for the processing nodes --------------------------------------------",
"processNodeSequence" : ["acquireData", "loadData", "PrepData", "BollingerBands"],
"processNodes" : [
	{
	"processNodeName" : "stop",
	"requiredFields" : {"processType" : "stop", "inputFlows" : [""], "outputFlow" : ""},
	"conditionalFields" : {}
	},
	{
	"processNodeName" : "acquireData",
	"requiredFields" : {"processType" : "dataAcquire", "inputFlows" : [], "outputFlow" : "acquiredData"},
	"conditionalFields" : {
		"dataLoadCtrl" : {
			"comment file spec" : "folder1\\folder2\\[a-z]*.csv",
			"inputFile" : ["market_data\\augmented\\*.csv"]
		}
	}
	},
	{
	"processNodeName" : "loadData",
	"requiredFields" : {"processType" : "dataLoad", "inputFlows" : [], "outputFlow" : "LoadedData"},
	"conditionalFields" : {
		"dataLoadCtrl" : {
			"inputFile" : ["*.csv"]
		}
	}
	},
	{
	"processNodeName" : "PrepData",
	"requiredFields" : {"processType" : "dataPrep", "inputFlows" : ["LoadedData"], "outputFlow" : "PreparedData"},
	"conditionalFields" : {
		"dataPrepCtrl" : {
			"ignoreBlanks" : true,
			"preparationSequence" : ["normalize", "oneHotEncoding"],
			"noPreparation" : {
				"features" : [
				]
			},
			"normalize" : {
				"comment types supported" : ["standard", "minmax", "relative_time_series"],
				"type" : "standard",
				"features" : [
					{"feature" : "BB_Upper"},
					{"feature" : "BB_Lower"},
					{"feature" : "EMA20"},
					{"feature" : "Open"},
					{"feature" : "High"},
					{"feature" : "Low"},
					{"feature" : "Close"}
				]
			},
			"oneHotEncoding" : {
				"features" : [
					{"feature" : "10day10pct", "categoryType" : "label", "comment" : "True/False"}
				]
			}
		}
	}
	},
	{
	"processNodeName" : "BollingerBands",
	"comment" : "As false positives are costly, a high recall score is most important",
	"requiredFields" : {"processType" : "Tensorflow", "inputFlows" : ["PreparedData"], "outputFlow" : ""},
	"conditionalFields" : {
		"categorizationRegression" : "categorization",
		"dataPrecision" : "float32", "balanceClasses" : true, "combineSampleCount" : 4,
		"comment visualizations" : ["summary", "testVsPrediction", "trainingFit", "CategorizedTimeSeries", "categoryMatrix"],
		"visualizations" : ["categoryMatrix"],
		"training iterations" : [
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BB std 1xLSTM 20d 50e mse mae",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 20, "layerUnits" : 256, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 50, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "mse", "compilationMetrics" : ["mae"]
				}
				}
			}
		]
	}
	}
],
"comment end of specification" : "------------------------------------------------------------------------------------",
"comment - training iterations" : "-----------------------------------------------------------------------------------",
"training iterations" : [
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BollingerBands std 1xLSTM 10d 10e",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 5, "layerUnits" : 256, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 10, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "categorical_crossentropy", "compilationMetrics" : ["categorical_crossentropy"]
				}
				}
			},
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BollingerBands std 2xLSTM 5d 10e",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 5, "layerUnits" : 256, "returnSequences" : true, "outputActivation" : "tanh"},
					{"layerName" : "hidden-lstm-1", "layerType" : "lstm", "timeSteps" : 5, "layerUnits" : 128, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 10, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "categorical_crossentropy", "compilationMetrics" : ["categorical_crossentropy"]
				}
				}
			},
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BollingerBands std 1xLSTM 20d 10e",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 20, "layerUnits" : 256, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 10, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "categorical_crossentropy", "compilationMetrics" : ["categorical_crossentropy"]
				}
				}
			},
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BollingerBands std 2xLSTM 20d 10e",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 20, "layerUnits" : 256, "returnSequences" : true, "outputActivation" : "tanh"},
					{"layerName" : "hidden-lstm-1", "layerType" : "lstm", "timeSteps" : 5, "layerUnits" : 128, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 10, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "categorical_crossentropy", "compilationMetrics" : ["categorical_crossentropy"]
				}
				}
			},
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BollingerBands std 1xLSTM 60d 10e",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 60, "layerUnits" : 256, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 10, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "categorical_crossentropy", "compilationMetrics" : ["categorical_crossentropy"]
				}
				}
			},
		{
			"iteration description" : "binary_crossentropy / [Accuracy, Precision, Recall] / sigmoid (unbalanced)",
			"iteration parameters" : {
				"iteration ID" : "BollingerBands std 2xLSTM 60d 10e",
				"modelFileDir" : "models\\BollingerBands\\",
				"tensorboard" : {"log file dir" : "logs\\tensorboard\\bb\\"},
				"forecastInterval" : 0,
				"modelLayers" : [
    				{"layerName" : "input", "layerType" : "lstm", "featureCount": 7, "timeSteps": 60, "layerUnits" : 256, "returnSequences" : true, "outputActivation" : "tanh"},
					{"layerName" : "hidden-lstm-1", "layerType" : "lstm", "timeSteps" : 5, "layerUnits" : 128, "returnSequences" : false, "outputActivation" : "tanh"},
					{"layerName" : "dropout1", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense1", "layerType" : "dense", "layerUnits" : 64, "outputActivation" : "tanh"},
					{"layerName" : "dropout2", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "hiddenDense2", "layerType" : "dense", "layerUnits" : 32, "outputActivation" : "tanh"},
					{"layerName" : "dropout3", "layerType" : "dropout", "dropoutRate" : 0.2},
    				{"layerName" : "output", "layerType" : "dense", "layerUnits": 2, "outputActivation" : "softmax"}
					],
				"training" : {
					"verbose" : 2, "batchSize" : 16, "epochs" : 10, "validationSplit" : 0.1, "testSplit" : 0.2, "shuffle" : false, 
					"lossWeights" : [1.0], "denseRegularation" : false, "regularationValue" : 0.0, "useBias" : true, 
					"optimizer" : {"name" : "adam", "learning_rate" : 0.001}, "compilationLoss" : "categorical_crossentropy", "compilationMetrics" : ["categorical_crossentropy"]
				}
				}
			}
]
}